<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <link rel="icon" type="image/x-ico" href="/assets/icon/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Music Player</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<button class="theme-toggle" aria-label="Toggle dark mode">
    <i class="material-icons">dark_mode</i>
</button>

<div class="player-container">
    <div class="player-header">
        <h1>Groove Player</h1>
    </div>

    <div class="player-controls">
        <audio id="audioPlayer" controls>
            Your browser does not support the audio element.
        </audio>
        <canvas id="visualizer"></canvas>
    </div>

    <div class="playlist">
        <div class="file-upload">
            <input type="file" id="audioFileInput" accept=".wav,.flac" class="file-input" />
            <label for="audioFileInput" class="upload-btn">
                <i class="material-icons">upload</i>
                Upload Music File
            </label>
            <input type="file" id="backgroundInput" class="file-input" accept="image/*">
            <label for="backgroundInput" class="upload-btn">
                <i class="material-icons">image</i>
                Change Background
            </label>
        </div>

        <ul id="musicList">
            {{range .musicFiles}}
            <li class="music-list-item" assets-file="/assets/music/{{.}}">
                <i class="material-icons">music_note</i>
                <span class="song-name">{{.}}</span>
                <button class="delete-btn" title="Delete">
                    <i class="material-icons">delete</i>
                </button>
            </li>
            {{end}}
        </ul>

    </div>
</div>
<script src="/static/UIManager.js"></script>
<script src="/static/BackgroundManager.js"></script>
<script src="/static/FileManager.js"></script>
<script src="/static/AudioPlayer.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const musicList = document.getElementById('musicList');
        new FileManager(musicList);
    });
</script>
</body>
</html>